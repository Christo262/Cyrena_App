@inherits LayoutComponentBase

<section class="layout has-sidebar is-page @(_side ? "is-collapsed":"")" style="--bb-layout-footer-height: 0px;">
    <aside class="layout-side">
        <div class="layout-banner">
            <div class="layout-title">
                <span>Cyréna</span>
            </div>
        </div>
        <div class="layout-menu">
            <div class="scroll" style="--bb-scroll-width: 5px; --bb-scroll-hover-width: 5px;">
                <nav class="menu is-vertical">
                    <ul class="submenu">
                        <li>
                            <NavLink Match="NavLinkMatch.All" href="" class="nav-link" @onclick="ToggleSide">
                                <div class="submenu-link">
                                    <i class="menu-icon bi bi-chat-dots"></i><!--!-->
                                    <span class="menu-text">New Chat</span>
                                </div><i class="arrow"></i>
                            </NavLink>
                        </li>
                        @if(_chats is not null)
                        {
                            foreach (var item in _chats.Where(x => x[ChatConfiguration.Group] is null))
                            {
                                <li>
                                    <ContextMenuZone>
                                        <ContextMenuTrigger>
                                            <NavLink Match="NavLinkMatch.All" href="@($"converse/{item.Id}")" class="nav-link" @onclick="ToggleSide">
                                                <div class="submenu-link">
                                                    <i class="menu-icon @item[ChatConfiguration.Icon]"></i><!--!-->
                                                    <span class="menu-text">@(item.Title ?? "New Chat")</span>
                                                </div><i class="arrow"></i>
                                            </NavLink>
                                        </ContextMenuTrigger>
                                        <ContextMenu>
                                            <ContextMenuItem Icon="bi bi-trash" Text="Delete" OnClick="(s,e) => Delete(item)"></ContextMenuItem>
                                        </ContextMenu>
                                    </ContextMenuZone>
                                </li>
                            }
                        }
                    </ul>
                </nav>
            </div>
        </div>
    </aside>
    <section class="layout-right">
        <header class="layout-header">
            <button @onclick="ToggleSide" class="btn btn-sm btn-outline-primary me-1 border-0"><i class="bi bi-layout-sidebar-inset"></i></button>
            Cyréna
            <div class="ms-auto"></div>
            <a href="settings" class="btn btn-outline-light btn-sm rounded-pill"><i class="bi bi-gear"></i></a>
        </header>

        <main class="layout-main" style="padding:0">
            @Body
        </main>
    </section>
</section>